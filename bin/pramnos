#!/usr/bin/env php
<?php declare(strict_types=1);

$possibleAutoloadPaths = [
     // local dev repository
     __DIR__ . '/../vendor/autoload.php',
     // dependency
     __DIR__ . '/../../../autoload.php',
];

foreach ($possibleAutoloadPaths as $possibleAutoloadPath) {
    if (file_exists($possibleAutoloadPath)) {
        require_once $possibleAutoloadPath;
        break;
    }
}

function showHelp()
{
    ?>
This is the Pramnos Framework CLI interface.

Usage:
pramnos [command]

    help: Display this help
<?php
    exit(0);
}

$params = $argv;
if ($argc < 2 || in_array($argv[1], array('--help', '-help', '-h', '-?'))) {
    showHelp();
}

if (!isset($_SERVER['HTTP_HOST'])) {
    $_SERVER['HTTP_HOST'] = 'localhost';
    $_SERVER['SERVER_PORT'] = 80;
    $_SERVER['SERVER_NAME'] = 'localhost';
    $_SERVER['REMOTE_ADDR'] = '127.0.0.1';
    $_SERVER['HTTP_USER_AGENT'] = 'CLI';
    $_SERVER['REQUEST_URI'] = '/';
}

echo "\nChecking Environment: ";
echo php_uname() . "\n";
define('sURL', 'https://pramnosframework.test'); //MainURL


switch ($params[1]) {
    case "--help":
    case "-help":
    case "help":
    case "-h":
    case "?":
        showHelp();
        break;


    default:
        echo "Invalid Command. "
        . "Please use:\npramnos --help\nfor help.";
        break;
}


exit(0);
